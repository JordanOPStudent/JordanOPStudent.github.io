---
layout: post
title: Week 6-8
---
#Week 6
This was the week where we got all of our planning signed off by Rob. He seemed pretty happy about we've planned and didn't seem to have many questions. There was a few things I wanted to add on and ask him about but it seemed like we were sorted to go right ahead. We hoped to get the server ready to be demoed by the end of the term.

Creating the server was going to be fairly new experience for me. Although I've toyed around with Azure quite a bit already, actually getting something up and running was going to be a bit different. Still, creating the VM was a pretty simple process. This was when I started to work on the installation documentation. Just a small text file that I used for scribbling notes. We kept the server off of the world wide web for the time being so we could work on it making sure it was all secure enough. To work around not being able to SSH into the server, I had Alister work on setting up an Azure service called "Bastion" which was to provide a remote console into the server without exposing it.

#Week 7
This was the first week we started working on installing the appropiate software onto the server. I had Alister work on getting the databases migrated onto the server while I worked on setting up phpMyAdmin, Apache and mariadb. Not only that, I also had to  Knowing how to securely install MariaDB on my own servers previously, I knew that I had to run the appropiate command `mysql_secure_installation` and run through that wizard. Doing so was going to set up our databases with the most secure configuration by default. Which thankfully means I don't have to deal with a lot of those details.

Next, I had to sort out the data disk. This was a simple formatting and mounting job. It didn't prove to be too difficult but I did take some time to consider where to mount it. If I mounted it in /mnt then it'd be easier to access and it's just what I'm really used to be then we ended up having a lot of problems with MariaDB not playing nicely with the new location which did take a bit of time to figure out. Eventually, I simply mount it on the default directory of `/var/mysql`.

Now was phpMyAdmin. It turned out installing it was a bit more problematic than I had expected. Rob wanted the latest version of phpMyAdmin to ensure that we were up to date on the security side of things. Due to how long the Ubuntu repos take to actually update, I had to add in the official php Ubuntu builds of php to get the latest version of php. Secondly, the same problem was that even though phpMyAdmin have their own Ubuntu repo, they hadn't updated it with their newest version due to wanting to test it. To remedy this until they have updated it, I had to manually install it and then enable php8.0 which was a process that took up a majority of the week trying to figure out and work around.

Lastly, Apache. Normally I use Nginx as a reverse proxy/website server but it seemed like things were going to be much easier to sort out if we stuck with apache. Besides, phpMyAdmin supported it more than Nginx. However, I've never used Apache so I had to do quite a lot of research into it as a lot of it really didn't seem that simple to me. But for now, I left most of that for next week.

#Week 8
Apache was the big thing I needed to get set up this week. I had to ask a lot questions with Rob about the SSL certificates, setting up domain names and all sorts. Thankfully, those two tasks were simple to set up. I simply had to ensure that the server was secured and ready to go. Going through a configurations and changes to ensure that no one could remotely access the root user via SSH and changed the SSH port to a non-default port to add a little bit of obscurity, everything seemed sorted.

I also demoed the server to Rob. There was a few problems we had. For example, he wanted an account on the server that will act as the server's administration account. Next, he didn't want to login via private keys as he wanted to keep things simple. Especially since it turned out that putty takes entirely different keys to the standard ones created which ended up forcing me back to fix up a few things. 

I did ask Rob if we it was a good idea to add a brute force prevention tool such as fail2ban and perhaps lock down the phpMyAdmin page behind a login but Rob seemed pretty fine with just keeping things simple due to previously adding such measures and just simply made things harder on him. I was fine with it but I fear this might not be the best idea. Regardless, I went ahead and sorted that out. It ended up taking a lot longer than I intended to fully demo the server to Rob but he did have a few things he wanted me to do. Set up that administrator account so he could set up Krissi's and his account, redirect all HTTP requests to HTTPS to ensure that we do not have any insecure traffic going to the server to prevent man in the middle attacks and he wanted to change the data disk to use logical volumes instead of simple physical volumes. This was so in case we did have to expand or split the drive, it was going to be flexible. And at the end, he wanted to create a security server that will replicate all of the databases from the main server to itself.

He seemed pretty pleased with the server even if we were a bit late on it. But this was when I realized that this project may take a lot longer than I had hoped for.